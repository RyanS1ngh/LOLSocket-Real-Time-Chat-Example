const WebSocket = require('ws');

module.exports = (apiKey, apiSecret) => {
  const wsUrl = `wss://ws1.lolsocket.com/${apiKey}/${apiSecret}`;

  // Create a new WebSocket instance
  const websocket = new WebSocket(wsUrl);

  // Handle WebSocket connection events
  websocket.on('open', () => {
    console.log('WebSocket connection opened');
  });

  websocket.on('message', (message) => {
    const data = JSON.parse(message.toString());

    if(data.event === 'uid'){
        console.log('UID:', data.uid);
    }
  });

  websocket.on('close', (code, reason) => {
    console.log(`WebSocket connection closed with code ${code}: ${reason}`);
    // Additional logic can be added here upon connection close
  });

  websocket.on('error', (error) => {
    console.error('WebSocket error:', error);
  });

  return websocket;
};
